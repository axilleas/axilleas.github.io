<?xml version="1.0" encoding="utf-8"?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Over the line</title><link>http://axilleas.github.io/</link><description></description><atom:link href="http://axilleas.github.io/feeds/gsoc.rss.xml" rel="self"></atom:link><lastBuildDate>Tue, 02 Jul 2013 00:00:00 +0300</lastBuildDate><item><title>GSoC - Weekly update 2</title><link>http://axilleas.github.io/en/blog/2013/gsoc-weekly-update-2</link><description>&lt;p&gt;Unfortunately this week hasn't been very productive due to lack of time. I managed
to package 5-6 more gems, but I haven't submit them in Bugzilla yet. As always, the
most difficult and time consuming task is to make all the test suites provided
with each gem pass. And believe me this isn't always easy. So, here is what I did
this week.&lt;/p&gt;
&lt;h2 id="meeting-gitlab-devs"&gt;Meeting GitLab devs&lt;/h2&gt;
&lt;p&gt;We arranged a google hangout and we talked about the progress I make.
They were kind enough to ask whether I need help with something. 
Then I got to meet in person &lt;a href="https://github.com/dosire"&gt;Sytse Sijbrandij&lt;/a&gt; and &lt;a href="https://github.com/maxlazio"&gt;Marin Jankovski&lt;/a&gt; 
during &lt;a href="http://euruko2013.org/"&gt;Euruko 2013&lt;/a&gt;. Really cool guys.&lt;/p&gt;
&lt;p&gt;Our main concern was about the gems that are GitLab's forks and how we should
deal with them since it is very unlikely they get accepted into the official Fedora
repos. See next week TODOs about that matter.&lt;/p&gt;
&lt;h2 id="wikification-and-versioning-process"&gt;Wikification and versioning process&lt;/h2&gt;
&lt;p&gt;I started a wiki page on &lt;a href="https://fedoraproject.org/wiki/User:Axilleas/GitLab"&gt;GitLab&lt;/a&gt;, listing all the &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/rubygems_missing"&gt;dependencies&lt;/a&gt; and their versions.
I said version&lt;strong&gt;s&lt;/strong&gt; because we have to deal with version mismatch, &lt;a href="https://fedoraproject.org/wiki/GSOC_2013/Student_Application_Axilleas/Gitlab%28463%29#Version_mismatch"&gt;remember&lt;/a&gt;?
I am working on a script to get them automatically on a table. So far, I can extract
GitLab's and upstream versions whereas I still need Fedora's. Here's how I do it.&lt;/p&gt;
&lt;h3 id="gitlab"&gt;GitLab&lt;/h3&gt;
&lt;p&gt;gem versions are retrieved from &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/gemfile.py#L30"&gt;this&lt;/a&gt; dictionary. Pretty simple.&lt;/p&gt;
&lt;h3 id="upstream"&gt;Upstream&lt;/h3&gt;
&lt;p&gt;Using &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/gemfile.py#L83"&gt;this&lt;/a&gt; method by qeuerying the API of rubygems.org and iterrating
through the missing gems, I can get in a list of the latest gem versions.&lt;/p&gt;
&lt;h3 id="fedora"&gt;Fedora&lt;/h3&gt;
&lt;p&gt;There is this nice tool in ruby called &lt;a href="https://rubygems.org/gems/pkgwat"&gt;pkgwat&lt;/a&gt; which queries Fedora's repo
database. This is also used by &lt;a href="https://github.com/zuhao/isitfedoraruby/blob/master/app/models/rpm_importer.rb#L46"&gt;isitfedoraruby&lt;/a&gt;, which unfortunately doesn't have
an API. This would make my work a lot easier.&lt;/p&gt;
&lt;p&gt;So, I decided to give this a shot by first &lt;a href="https://github.com/axilleas/fedora/blob/master/packages/rubygem-pkgwat/rubygem-pkgwat.spec"&gt;packaging&lt;/a&gt; it. This is what I am learning
here, isn't it? I thought this would be a matter of time since it only depends on
one unpackaged gem, &lt;a href="https://rubygems.org/gems/sanitize"&gt;sanitize&lt;/a&gt; (which ironically is needed by GitLab too).&lt;/p&gt;
&lt;p&gt;&lt;em&gt;(And I just whipped out a mosquito. Where the hell are they going 14.30 in the afternoon?...)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;The process that I thought would take me 30 minutes top, still goes on.
You see, &lt;code&gt;pkgwat&lt;/code&gt; has a fixed dependency on &lt;code&gt;nokogiri 1.5.5&lt;/code&gt; whereas the latest
&lt;code&gt;sanitize 2.0.4&lt;/code&gt; requires &lt;code&gt;nokogiri&amp;gt;=1.6.0&lt;/code&gt;. On Fedora we have &lt;code&gt;nokogiri 1.5.9&lt;/code&gt;.
Let me draw that for you.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Dependency hell" src="http://axilleas.github.io/static/images/pkgwat.png" /&gt;&lt;/p&gt;
&lt;p&gt;Welcome to Gem dependency hell. The only way to install it is through
&lt;code&gt;gem install pkwat&lt;/code&gt;...&lt;/p&gt;
&lt;h2 id="package-review"&gt;Package review&lt;/h2&gt;
&lt;p&gt;My first informal review in order to be sponsored as a packager was 
&lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=927374"&gt;rubygem-rugged&lt;/a&gt;. I did all my homework and I tested the given
SPEC and SRPM with fedora-review, I built the rpm using both mock and rpmbuild 
and then ran rpmlint against the produced packages. I made a few notes of 
what I thought needed fixing and with some help from Vit&lt;sup id="fnref:cheat"&gt;&lt;a class="footnote-ref" href="#fn:cheat" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt; I submited
my review.&lt;/p&gt;
&lt;h2 id="package-submission"&gt;Package submission&lt;/h2&gt;
&lt;p&gt;Last week I submited for review &lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=969877"&gt;rubygem-timers&lt;/a&gt;, this week it
is &lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=978284"&gt;rubygem-redis&lt;/a&gt;. One package a week you say? Dude are you
ever going to package all these gems? Well, submiting a package for review
in bugzilla takes some time, as I carefully check to follow the guidelines
as much as I can. The toughest part of it all are the testing suites.
A test may rely on other gems that are not in Fedora yet, so I try to package 
them as well. &lt;a href="https://github.com/axilleas/fedora/tree/master/packages"&gt;Here&lt;/a&gt; you will find some packages I am working on. 
Most of them are not submited for review yet.&lt;/p&gt;
&lt;h2 id="todos-for-next-week"&gt;TODOs for next week&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Get more packages finished&lt;/li&gt;
&lt;li&gt;Complete the version table in wiki&lt;/li&gt;
&lt;li&gt;Start porting gemfile.py into ruby (eventually)&lt;/li&gt;
&lt;li&gt;Continue writing the article about Rubygem packaging&lt;/li&gt;
&lt;li&gt;Talk to infra team to see how that forked-gem-packaging will go&lt;/li&gt;
&lt;li&gt;I am just a placeholder, nothing useful here, I just wanted to continue the stairs&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:cheat"&gt;
&lt;p&gt;I actually did seek for some help in &lt;a href="https://lists.fedoraproject.org/pipermail/ruby-sig/2013-July/001373.html"&gt;Ruby-SIG&lt;/a&gt; ML :p&amp;#160;&lt;a class="footnote-backref" href="#fnref:cheat" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">axil</dc:creator><pubDate>Tue, 02 Jul 2013 00:00:00 +0300</pubDate><guid>tag:axilleas.github.io,2013-07-02:en/blog/2013/gsoc-weekly-update-2</guid><category>gsoc</category><category>fedora</category><category>gitlab</category></item><item><title>GSoC - Weekly update 1</title><link>http://axilleas.github.io/en/blog/2013/gsoc-weekly-update-1</link><description>&lt;p&gt;It's been over a week that GSoC started and here is a weekly report of what achieved
so far.&lt;/p&gt;
&lt;h2 id="weekly-process"&gt;Weekly process&lt;/h2&gt;
&lt;h3 id="workflow"&gt;Workflow&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://trello.com/board/gitlab/51b844202ed21a6735011b25"&gt;Trello board&lt;/a&gt; - This is a web app in which you can manage your workflow by adding
tasks that are to be completed. I set it up to remind me the things I have to accomplish
in due time. Cool thing is that there is an android app too, so I can manage it
from wherever I am :)&lt;/p&gt;
&lt;h3 id="first-package"&gt;First package&lt;/h3&gt;
&lt;p&gt;I submitted my first package to Bugzilla for review. Yay! It is called &lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=969877"&gt;timers&lt;/a&gt;
and is of course a rubygem (what else :p). Not a big deal, just an easy one to get
me started.&lt;/p&gt;
&lt;h3 id="list-of-gems-to-package"&gt;List of gems to package&lt;/h3&gt;
&lt;p&gt;I re-calculated GitLab's gem dependencies, this time including only the ones
needed for runtime. I ditched from the list the ones that are used for testing/development.
Not that they are not useful, but for the time being runtime dependencies
are a priority. I used a really ugly hack but it works for now. Here is how:
Clone &lt;a href="https://github.com/gitlabhq/gitlabhq"&gt;GitLab&lt;/a&gt;, cd into it and run:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;bundle &lt;span class="nb"&gt;exec &lt;/span&gt;install --deployment --without &lt;span class="nb"&gt;test &lt;/span&gt;development
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This will install all deps included in the Gemfile except for the ones in test and 
development groups. Then, using a for loop we can iterate under the &lt;code&gt;vendor/bundle/ruby/1.9.1/gems&lt;/code&gt;
directory and write the results in a file.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;&lt;span class="k"&gt;for &lt;/span&gt;i in &lt;span class="sb"&gt;`&lt;/span&gt;ls vendor/bundle/ruby/1.9.1/gems&lt;span class="sb"&gt;`&lt;/span&gt;; &lt;span class="k"&gt;do &lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$i&lt;/span&gt; &amp;gt;&amp;gt; ../gitlab53-gems; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The list contains gems in the format of &lt;code&gt;gem_name-1.0.0&lt;/code&gt; so I had to clean that
up a little. I used some string methods in the &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/gemfile.py#L30"&gt;python script&lt;/a&gt; and stored those values
in a dictionary where key is the gem name and value its version. Then the names
list was easily retrievable. All I had to do is call the &lt;code&gt;keys()&lt;/code&gt; method on
the dictionary and store the result in a &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/rubygems_gitlab"&gt;file&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Then, I had somehow to include in the list of already packaged gems, the ones that 
are submitted in bugzilla for review. No need to work on them if their specfile
is already submitted for review, right? For that I used the &lt;a href="https://fedorahosted.org/python-bugzilla/"&gt;python-bugzilla&lt;/a&gt;
tool that queries a Bugzilla instance and spits nice &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/rubygems_bugzilla_raw"&gt;formated results&lt;/a&gt;.
The query is pretty much self explanatory. In the end I just sorted them according
to their bug status.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;bugzilla query --product&lt;span class="o"&gt;=&lt;/span&gt;fedora --bug_status&lt;span class="o"&gt;=&lt;/span&gt;new,assigned --component&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Package Review&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
--short_desc&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rubygem-&amp;#39;&lt;/span&gt; | sort -k2 -r &amp;gt; &lt;span class="nv"&gt;$bugzilla_gems_raw&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Below, using the same query methods and some sed/awk magic&lt;sup id="fnref:json"&gt;&lt;a class="footnote-ref" href="#fn:json" rel="footnote"&gt;1&lt;/a&gt;&lt;/sup&gt;, we end up with a file
containing only the names of gems that are submitted for review in Bugzilla.&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;bugzilla query --product&lt;span class="o"&gt;=&lt;/span&gt;fedora --bug_status&lt;span class="o"&gt;=&lt;/span&gt;new,assigned --component&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Package Review&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
--short_desc&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rubygem-&amp;#39;&lt;/span&gt; | awk &lt;span class="s1"&gt;&amp;#39;BEGIN { FS = &amp;quot; - &amp;quot; }; { print $3 }&amp;#39;&lt;/span&gt; | awk &lt;span class="s1"&gt;&amp;#39;BEGIN { FS = &amp;quot;:&amp;quot; }; { print $2 }&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
| sed -e &lt;span class="s1"&gt;&amp;#39;s/rubygem-//&amp;#39;&lt;/span&gt; | sort -k1 &amp;gt; &lt;span class="nv"&gt;$bugzilla_gems&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;That list, combined with the query from the official repos, results in the &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/rubygems_fedora"&gt;final&lt;/a&gt;
one which has all the Ruby gems already packaged or are to be packaged for Fedora.&lt;/p&gt;
&lt;p&gt;I also wrote a method to store those values in a &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/gemfile.py#L95"&gt;dictionary&lt;/a&gt; in the format
of &lt;code&gt;dict = { gem_name: [bug_id, status, assignee, description] }&lt;/code&gt;. It might come
in handy in the future, who knows!&lt;/p&gt;
&lt;p&gt;Next step was to find the missing gems that I will have to package for Fedora.
Comparing those two lists we end up with this &lt;a href="https://github.com/axilleas/fedora/blob/master/gitlab-deps/rubygems_missing"&gt;list&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;And the new results are:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Gitlab uses &lt;strong&gt;143&lt;/strong&gt; runtime gems.&lt;/p&gt;
&lt;p&gt;Fedora has packaged &lt;strong&gt;461&lt;/strong&gt; gems.&lt;/p&gt;
&lt;p&gt;There are &lt;strong&gt;73&lt;/strong&gt; common gems.&lt;/p&gt;
&lt;p&gt;There should be packaged &lt;strong&gt;70&lt;/strong&gt; gems.&lt;/p&gt;
&lt;p&gt;Fedora will have &lt;strong&gt;15.18 %&lt;/strong&gt; more ruby packages, that is &lt;strong&gt;531&lt;/strong&gt; gems in total.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="gem-tree-dependencies"&gt;Gem tree dependencies&lt;/h3&gt;
&lt;p&gt;There are a lot of gems that depend on each other which means one has to
be picky as to what to package first. The best way would be: given a package,
find its dependency tree and start packaging first the leafs that have no children
going all the way up until you reach to the root.&lt;/p&gt;
&lt;p&gt;I started writing a &lt;a href="https://github.com/axilleas/fedora/tree/master/gitlab-deps/gemtree"&gt;script&lt;/a&gt; in ruby as a way to better learn the language,
but I have yet to iplement the DFS algorithm which will traverse through all
dependencies. Any comments on how to best approach this are welcomed!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Update!!&lt;/em&gt;&lt;/strong&gt; I just found out this reaaally cool site: &lt;a href="https://gemlou.pe"&gt;https://gemlou.pe&lt;/a&gt;
which parses rubygems.org and lists the runtime tree dependencies of a gem through 
javascript!&lt;/p&gt;
&lt;h3 id="article-about-gem-packaging"&gt;Article about gem packaging&lt;/h3&gt;
&lt;p&gt;I started writing an article about packaging a Ruby gem in Fedora. I want to
note down the whole process, beginning from the use of gem2rpm to the review process.
At first I wanted to have it finished by this week, but the information is so vast
that I will take my time and write it piece by piece. You can follow the process &lt;a href="https://github.com/axilleas/axilleas.github.io/blob/source/src/posts/en/2013-06-12-fedora-rubygem-packaging.md"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="todo"&gt;TODO&lt;/h2&gt;
&lt;p&gt;Some TODOs for this week:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Continue writing the article about Rubygem packaging&lt;/li&gt;
&lt;li&gt;Make some unofficial package reviews in order to get &lt;a href="https://fedoraproject.org/wiki/Join_the_package_collection_maintainers#Get_Sponsored"&gt;sponsored&lt;/a&gt; as a packager&lt;/li&gt;
&lt;li&gt;Make more package submissions (I have some specfiles ready)&lt;/li&gt;
&lt;li&gt;Start wikifying the process (like the &lt;a href="https://fedoraproject.org/wiki/User:Ktdreyer/Gitorious"&gt;Gitorious&lt;/a&gt; page)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="extras"&gt;Extras&lt;/h2&gt;
&lt;p&gt;Apart from the GSoC program that is an awesome experience, there are some other
cool stuff going on this summer. &lt;/p&gt;
&lt;p&gt;First one is &lt;a href="http://euruko2013.org/"&gt;Euruko&lt;/a&gt; which will take place in
Athens, so it will be easy to attend. I have already purchased a ticket. I am sure
that it's gonna be awesome and I'll get to meet the GitLab devs as well :)&lt;/p&gt;
&lt;p&gt;The other one is a MOOC by UC Berkley and is a course about agile development and SaaS.
It has two parts:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.edx.org/course/uc-berkeley/cs-169-1x/software-service/993"&gt;CS169.1x&lt;/a&gt; starts on July 2nd and is lasting 5 weeks&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.edx.org/course/uc-berkeley/cs-169-2x/software-service/1005"&gt;CS169.2x&lt;/a&gt; starts on August 13th and is lasting 6 weeks&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The language they use is Ruby and the framework on which they build the apps is
Rails. I am going to attend both courses as it is strictly related to GitLab and
my GSoC involvement. Actually, I already bought the accompanying &lt;a href="http://www.saasbook.info/"&gt;book&lt;/a&gt; (not mandatory)
and started reading it :)&lt;/p&gt;
&lt;p&gt;I will try to be more on schedule next time and post about my progress at the end
of each week.&lt;/p&gt;
&lt;p&gt;Cheers!&lt;/p&gt;
&lt;div class="footnote"&gt;
&lt;hr /&gt;
&lt;ol&gt;
&lt;li id="fn:json"&gt;
&lt;p&gt;It would make matters easier if the query returned a json file. I haven't
seen anything in the man page about json support.&amp;#160;&lt;a class="footnote-backref" href="#fnref:json" rev="footnote" title="Jump back to footnote 1 in the text"&gt;&amp;#8617;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">axil</dc:creator><pubDate>Tue, 25 Jun 2013 00:00:00 +0300</pubDate><guid>tag:axilleas.github.io,2013-06-25:en/blog/2013/gsoc-weekly-update-1</guid><category>gsoc</category><category>fedora</category><category>gitlab</category></item><item><title>Accepted for GSoC 2013</title><link>http://axilleas.github.io/en/blog/2013/accepted-for-gsoc-2013</link><description>&lt;p&gt;&lt;img alt="gsoc-logo" src="https://1-ps.googleusercontent.com/sx/s.google-melange.appspot.com/www.google-melange.com/soc/content/2-1-20130521/images/gsoc/logo/924x156xbanner-gsoc2013.png.pagespeed.ic.Z9V_lgyiqp.jpg" /&gt;&lt;/p&gt;
&lt;p&gt;Sooo, I am happy to announce that I got accepted to this year's Google Summer of Code!
Couldn't be more happy right now :)&lt;/p&gt;
&lt;p&gt;For those that have no idea, here is my &lt;a href="https://fedoraproject.org/wiki/GSOC_2013/Student_Application_Axilleas/Gitlab%28463%29"&gt;proposal&lt;/a&gt; on Fedora's wiki (&lt;a href="https://fedoraproject.org/wiki/User:Axilleas"&gt;my user&lt;/a&gt;). 
I have in mind to make a follow post on how I dealt with all this the past three months.&lt;/p&gt;
&lt;p&gt;Special thanks to &lt;a href="https://github.com/johngian"&gt;John Giannelos&lt;/a&gt; for pressuring me to apply :p&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">axil</dc:creator><pubDate>Mon, 27 May 2013 00:00:00 +0300</pubDate><guid>tag:axilleas.github.io,2013-05-27:en/blog/2013/accepted-for-gsoc-2013</guid><category>gsoc</category><category>fedora</category><category>gitlab</category><category>superexcited</category></item></channel></rss>