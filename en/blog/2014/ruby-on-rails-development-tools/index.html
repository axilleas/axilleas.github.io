<!DOCTYPE html>
<html>
   <head>
   <meta charset="utf-8">
       <title>Rails development tools</title>
       <meta charset="utf-8" />
       <meta name="viewport" content="width=device-width, initial-scale=1.0" />
       <meta http-equiv="Pragma" content="no-cache" />
       <meta http-equiv="Expires" content="-1" />
       <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
       <link rel="stylesheet" href="/theme/css/friendly.css" type="text/css" />
       <link rel="stylesheet" href="/theme/css/print.css" type="text/css" media="print" />
       <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
       <link rel="stylesheet" href="/theme/css/font-awesome.min.css" type="text/css" />
       <link href="http://axilleas.me/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Over the line RSS Feed" />
</head>
<body>
   <header>
       <h1><a href="/" title="Mark it zero">Over the line</a></h1>
       <nav>
         <a href="/about" title="about me">whoami</a> &bull;
         <a href="/archives.html" title="Archives">Archives</a> &bull;
         <a id="subscribe-link" href="/rss" title="RSS feed" rel="nofollow">subscribe</a>
         <form id="searchform" action="/search.html" onsubmit="return (this.elements['q'].value.length > 0)">
               <input id="searchbox" type="text" name="q" size="12" placeholder="Search">
         </form>
       </nav>
   </header>

   <div id="main">
<article>
    <header>
<h1><a href="/en/blog/2014/ruby-on-rails-development-tools" rel="bookmark">
    Rails development tools
</a></h1>
<span title="~1971 words" id='stats'>~8 min read</span>
&bull;
<time datetime="2014-07-01 00:00:00+03:00" pubdate>Posted on
    Tue 01 July 2014
</time>
<span class="category">in <a href="/category/opensource.html">
    opensource</a>
</span>
    <ul class="tags">
    Tags:
        <li><a href="/tag/fedora.html">fedora</a></li>
        <li><a href="/tag/gsoc.html">gsoc</a></li>
        <li><a href="/tag/ruby.html">ruby</a></li>
        <li><a href="/tag/rails.html">rails</a></li>
        <li><a href="/tag/webdev.html">webdev</a></li>
    </ul>
    </header>

    <div class="body">
        <p>During the past two months I have been reading constantly about Rails and
how I could get more productive when writing code and testing my apps.
There is a ton of information about those matters on the web and I'll try
to include as many articles as I could find useful to my knowledge building.</p>
<p><em>Disclaimer:</em> This article is heavily inspired by Thoughtbot's
<a href="https://learn.thoughtbot.com/products/2-vim-for-rails-developers" title="Vim for Rails Developers">Vim for Rails Developers</a> which I stumbled upon during browsing the
screencasts of <a href="https://codeschool.com" title="codeschool homepage">codeschool</a>.</p>
<div class="toc">
<ul>
<li><a href="#editor-of-choice-vim">Editor of choice (vim)</a><ul>
<li><a href="#vim-plugins">vim plugins</a><ul>
<li><a href="#railsvim">rails.vim</a></li>
<li><a href="#vim-snipmate">vim-snipmate</a></li>
<li><a href="#fugitivevim">fugitive.vim</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#terminal-multiplexer-tmux">Terminal multiplexer (tmux)</a></li>
<li><a href="#development-stack">Development stack</a><ul>
<li><a href="#jazz_hands">jazz_hands</a></li>
<li><a href="#rubocop">rubocop</a></li>
<li><a href="#railroady">railroady</a></li>
<li><a href="#annotate">annotate</a></li>
</ul>
</li>
<li><a href="#testing-stack">Testing stack</a><ul>
<li><a href="#rspec">rspec</a></li>
<li><a href="#capybara">capybara</a></li>
<li><a href="#guard">guard</a></li>
</ul>
</li>
<li><a href="#other-super-useful-tools">Other super useful tools</a><ul>
<li><a href="#ctags">ctags</a><ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#configuration">Configuration</a></li>
<li><a href="#usage">Usage</a></li>
<li><a href="#secret-power">Secret power</a></li>
</ul>
</li>
<li><a href="#ack">ack</a><ul>
<li><a href="#alternative-ag">alternative (ag)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</div>
<h1 id="editor-of-choice-vim">Editor of choice (vim)</h1>
<p>When you work from the command line and you use linux, your editor
preference comes down to two choices: vim and emacs. I started with vim
some time ago so I'll stick with it.</p>
<p>If you are new to vim read this <a href="http://www.viemu.com/vi-vim-cheat-sheet.gif" title="vim cheatsheet">cheatsheet</a> to learn the basical
commands.</p>
<h2 id="vim-plugins">vim plugins</h2>
<p>Start by installing <a href="https://github.com/tpope/vim-pathogen" title="pathogen vim plugin">pathogen.vim</a>, a vim plugin manager:</p>
<div class="codehilite"><pre>mkdir -p ~/.vim/autoload ~/.vim/bundle &amp;&amp; \
curl -LSso ~/.vim/autoload/pathogen.vim https://tpo.pe/pathogen.vim
</pre></div>


<p>Then add this to your vimrc:</p>
<div class="codehilite"><pre>execute pathogen#infect()
</pre></div>


<p>From now on, every plugin that is compatible with pathogen can be simply
installed by cloning its repo at <code>~/.vim/bundle</code>.</p>
<p>An alternative for pathogen is <a href="https://github.com/gmarik/Vundle.vim" title="vundle vim plugin">vundle</a>. Haven't used it but it
behaves similarly.</p>
<h3 id="railsvim">rails.vim</h3>
<p>Probably the one most useful plugin when dealing with Rails projects.</p>
<p>Install it with:</p>
<div class="codehilite"><pre>git clone git://github.com/tpope/vim-rails.git ~/.vim/bundle/vim-rails
</pre></div>


<p><strong>Browsing through the app</strong></p>
<p>You can use <code>:RController foos</code> and it will take you straight
to the <code>app/controllers/foos_controller.rb</code>. As you might guess, same
happens with <code>:RModel foo</code>, etc. There is also tab completion so that
you can toggle between all models/controllers, etc.</p>
<p>Another useful command is <code>:find</code>. Invoking it with a name foo, it first
searches for a model named foo. Tab completion is also your friend.</p>
<p>One other really cool feature is the go to file. Supposedly we have the
following model:</p>
<div class="codehilite"><pre><span class="k">class</span> <span class="nc">Blog</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>

  <span class="n">has_many</span> <span class="ss">:articles</span>

<span class="k">end</span>
</pre></div>


<p>Placing the cursor on the articles word and pressing <code>gf</code> vim opens
the article model. After saving your changes you can go back to the blog
model by pressing <code>Ctrl-o</code>.</p>
<p><strong>Run your tests through vim</strong></p>
<p>Running test is also a matter of a command. Say you are editing a specific
spec/test file. All you have to do is run <code>:Rake</code> and the tests for that
particular file will be ran, without leaving your favorite editor :)</p>
<p>The supported commands are a lot and your best bet is to invoke
<code>:help rails</code> in vim and learn about them.</p>
<p>Be sure to also check <a href="https://github.com/tpope/vim-rails" title="vim-rails on github">vim-rails</a> on github.</p>
<h3 id="vim-snipmate">vim-snipmate</h3>
<p>SnipMate implements snippet features in Vim. A snippet is like a template,
reducing repetitive insertion of pieces of text. Snippets can contain
placeholders for modifying the text if necessary or interpolated code for
evaluation.</p>
<p>Install it:</p>
<div class="codehilite"><pre>cd ~/.vim/bundle
git clone https://github.com/tomtom/tlib_vim.git
git clone https://github.com/MarcWeber/vim-addon-mw-utils.git
git clone https://github.com/garbas/vim-snipmate.git
git clone https://github.com/honza/vim-snippets.git
</pre></div>


<ul>
<li><a href="https://github.com/honza/vim-snippets/blob/master/snippets/ruby.snippets" title="Ruby supported snippets">List of supported Ruby snippets</a></li>
<li><a href="https://github.com/honza/vim-snippets/blob/master/snippets/ruby.snippets#L598" title="Rails supported snippets">List of supported Rails snippets</a></li>
</ul>
<p><strong>Writing a method</strong></p>
<p>Reading the source code of snippets above let's see how we can create a
method. The snippet reads:</p>
<div class="codehilite"><pre>snippet def
        def <span class="cp">${</span><span class="mi">1</span><span class="p">:</span><span class="n">method_name</span><span class="cp">}</span>
                <span class="cp">${</span><span class="mi">0</span><span class="cp">}</span>
        end
</pre></div>


<p>So, the snippet is named <code>def</code> and in order to invoke it we must write
def and hit Tab. It then expands, placing the cursor in the highlited
<code>method_name</code>. This is what it looks like:</p>
<div class="codehilite"><pre>def method_name

end
</pre></div>


<p>Once you start typing, method_name gets replaced with what you type. When
you finish, hit Tab again to go to the method body.</p>
<p>Now all you have to do is read the <code>ruby.snippet</code> and find out what
snippets are supported.</p>
<h3 id="fugitivevim">fugitive.vim</h3>
<p><a href="https://github.com/tpope/vim-fugitive" title="vim-fugitive on github">vim-fugitive</a> brings the power of git commands inside vim.</p>
<p>Install it with:</p>
<div class="codehilite"><pre>git clone git://github.com/tpope/vim-fugitive.git ~/.vim/bundle/vim-fugitive
</pre></div>


<p>Check out the github page for a list of commands and some interesting
screencasts.</p>
<h1 id="terminal-multiplexer-tmux">Terminal multiplexer (tmux)</h1>
<p>Again, here you have two options. <code>screen</code> or <code>tmux</code>. My first contact was
with screen but recently I decided to try tmux.</p>
<p>I won't go into any details but I highly reccomend watching Chris Hunt's
presentation <a href="https://www.youtube.com/watch?v=9jzWDr24UHQ" title="Chris Hunt - Impressive Ruby Productivity with Vim and Tmux - Ancient City Ruby 2013 ">Impressive Ruby Productivity with Vim and Tmux</a>.
It's an awesome talk.</p>
<h1 id="development-stack">Development stack</h1>
<p>There is a great <a href="http://www.codebeerstartups.com/2013/04/must-have-gems-for-development-machine-in-ruby-on-rails">article</a> I stumbled upon yesterday about some must have gems
for development, some of which I haven't tested. Here is what I got so far.</p>
<h2 id="jazz_hands">jazz_hands</h2>
<p><a href="https://github.com/nixme/jazz_hands" title="jazz_hands on github">jazz_hands</a> is basically a collection of gems that you get for free with
just one gem. It focuses on enhancing the rails console. It provides:</p>
<div class="codehilite"><pre>- Pry for a powerful shell alternative to IRB.
- Awesome Print for stylish pretty print.
- Hirb for tabular collection output.
- Pry Rails for additional commands (show-routes, show-models, show-middleware) in the Rails console.
- Pry Doc to browse Ruby source, including C, directly from the console.
- Pry Git to teach the console about git. Diffs, blames, and commits on methods and classes, not just files.
- Pry Remote to connect remotely to a Pry console.
- Pry Debugger to turn the console into a simple debugger.
- Pry Stack Explorer to navigate the call stack and frames.
- Coolline and Coderay for syntax highlighting as you type. Optional. MRI 1.9.3/2.0.0 only
</pre></div>


<p>Again, visiting the github page, you will get all the info you want.
There is an open <a href="https://github.com/nixme/jazz_hands/pull/26">issue</a> and installation on ruby 2.1.2 is failing for now.
For the time being you can put the following in your Gemfile:</p>
<div class="codehilite"><pre>gem &#39;jazz_hands&#39;, github: &#39;nixme/jazz_hands&#39;, branch: &#39;bring-your-own-debugger&#39;
gem &#39;pry-byebug&#39;
</pre></div>


<h2 id="rubocop">rubocop</h2>
<p><a href="https://github.com/bbatsov/rubocop">rubocop</a> is a tool which checks if your code conforms to the
<a href="https://github.com/bbatsov/ruby-style-guide" title="Ruby style guide">ruby</a>/<a href="https://github.com/bbatsov/rails-style-guide" title="Rails style guide">rails</a> community guidelines.</p>
<p>You can check the article I <a href="http://axilleas.me/en/blog/2014/rubocop-to-the-rescue">wrote</a>
where I explain how to set it up and running.</p>
<h2 id="railroady">railroady</h2>
<p><a href="https://github.com/preston/railroady" title="railroady gem">railroady</a> is a tool that lets you visualize how the models and the
controllers of your app are structured. Instructions on how to install it are
on the github page. You can <a href="https://gitlab.com/fedora-ruby/isitfedoraruby/raw/master/doc/models_complete.svg">check</a> how it looks like on the
fedoraruby project I'm currently working on.</p>
<h2 id="annotate">annotate</h2>
<p><a href="https://github.com/ctran/annotate_models" title="annotate on github">annotate</a> generates a schema of the model and places it on top of the model.
It can also place it on top of your rspec files and the factories. It looks
like this:</p>
<div class="codehilite"><pre># == Schema Information
#
# Table name: bugs
#
#  id            :integer          not null, primary key
#  name          :string(255)
#  bz_id         :string(255)
#  fedora_rpm_id :integer
#  is_review     :boolean
#  created_at    :datetime
#  updated_at    :datetime
#  last_updated  :string(255)
#  is_open       :boolean
#
</pre></div>


<h1 id="testing-stack">Testing stack</h1>
<p>There is a ton of useful tools out there and if you are new to rails
development you can easilly get lost. <a href="http://words.steveklabnik.com/rails-has-two-default-stacks" title="Rails has Two Default Stacks">Rails has Two Default Stacks</a> is
a nice read that sums it up. I will try to update this post as I find more
useful tools in my way.</p>
<h2 id="rspec">rspec</h2>
<p>I am mostly in favor of rspec because of its descriptive language and the great
support by other complement testing tools.</p>
<h2 id="capybara">capybara</h2>
<p>So, why capybara and not cucumber? I'm not an expert on neither of these tools
but from my understanding capybara is more focused on developers whereas
cucumber's human language mostly targets aplications where one talks to a
non-technical customer.</p>
<h2 id="guard">guard</h2>
<blockquote>
<p>Guard watches files and runs a command after a file is modified. This allows
you to automatically run tests in the background, restart your development
server, reload the browser, and more.</p>
</blockquote>
<p>It has nearly 200 plugins which provide different options as guard is not only
used for testing. The particular plugin for rspec is <a href="https://github.com/guard/guard-rspec" title="guard-rspec on github">guard-rspec</a>.</p>
<p>When you make the smallest change to a test and you hit save, <a href="https://github.com/guard/guard" title="guard on github">guard</a> will
run that particular test group again to see if it still passes.</p>
<p>I tend to invoke guard with <code>guard -c</code> which runs the tests in a clear console
every time.</p>
<p>Read the <a href="https://github.com/guard/guard/wiki" title="guard wiki page">guard wiki page</a> which is comprehensive and also watch the
[guard railscast][] to better understand it.</p>
<h1 id="other-super-useful-tools">Other super useful tools</h1>
<h2 id="ctags">ctags</h2>
<p>Quoting from <a href="http://ctags.sourceforge.net/whatis.html" title="What is ctags?">What is ctags?</a>:</p>
<blockquote>
<p>Ctags generates an index (or tag) file of language objects found in
source files that allows these items to be quickly and easily located
by a text editor or other utility.</p>
</blockquote>
<p>There are a bunch of different tools to create a tags file, but the most
common implementation is <a href="http://ctags.sourceforge.net/" title="Exuberant ctags homepage">exuberant ctags</a> which we will use.</p>
<p>It supports 41 programming languages and a handful of editors.
directories</p>
<h3 id="installation">Installation</h3>
<p>Install ctags via your package manager. It should be supported in all
major ditributions.</p>
<h3 id="configuration">Configuration</h3>
<p>For a rails project, in your application root directory you can run:</p>
<div class="codehilite"><pre>ctags -R --exclude=.git --exclude=log *
</pre></div>


<p>This searches recursively all files in the current directory, excludes
the <code>.git</code> and <code>log</code> directories and creates a <code>tags</code> file under current
dir. You may want to add it to <code>.gitignore</code> by the way.</p>
<p>Next, adding the following line to <code>~/.vimrc</code>:</p>
<div class="codehilite"><pre>set tags=./tags;
</pre></div>


<p>sets the location of the tags file, which is relative to the current
directory.</p>
<p>You can move the above options in <code>~/.ctags</code>, so in our case this will
be:</p>
<div class="codehilite"><pre>--recurse=yes
--tag-relative=yes
--exclude=.git
--exclude=log
</pre></div>


<p>So in future runs of ctags all you need to do is <code>ctags *</code>.</p>
<p>ctags doesn't autogenerate, so each time you write code that is tagable,
you have to run the command again. If you are working in a git repository
be sure to checkout Tim Pope's <a href="http://tbaggery.com/2011/08/08/effortless-ctags-with-git.html" title="Effortless Ctags with Git">Effortless Ctags with Git</a>.
What this does is:</p>
<blockquote>
<p>Any new repositories you create or clone will be immediately indexed
with Ctags and set up to re-index every time you check out, commit,
merge, or rebase. Basically, you’ll never have to manually run Ctags
on a Git repository again.</p>
</blockquote>
<h3 id="usage">Usage</h3>
<p>Say we have a file containing hundrends of lines. Inside a method you
see the below definition:</p>
<div class="codehilite"><pre><span class="k">def</span> <span class="nf">contain_multiple_methods</span>
  <span class="n">method_one</span>
  <span class="n">method_two</span>
  <span class="n">method_three</span>
<span class="k">end</span>
</pre></div>


<p>While you could search for these methods, you can save a few keystrokes
by simply getting the cursor on the line of the method to search and in
vim normal mode press <code>Ctrl + ]</code> (control and right square bracket).
This should get you where the method is. Go back to where you were by
pressing <code>Ctrl + t</code>.</p>
<p><strong>Note:</strong> The usage of ctags isn't restricted only in the current file.
If a method in your file is inherited by another class, then searching
for it will jump in this particular file.</p>
<h3 id="secret-power">Secret power</h3>
<p>Wouldn't it be cool if we could search for methods in the Rails source
code? Here is where the power of ctags really excels. All you have to do
is tell ctags to also tag the rails source code.</p>
<p>First I cloned the rails repository into <code>vendor/rails</code>:</p>
<div class="codehilite"><pre>git clone https://github.com/rails/rails.git vendor/rails
</pre></div>


<p>It should take less than a minute to download. You wouldn't want
the rails source code to be included in your git tree, so you simply
exclude <code>vendor/rails</code> by adding it to <code>.gitignore</code>.</p>
<p>Lastly, create again the tags with <code>ctags *</code>.</p>
<p>Now navigate with vim to one of your models that has for example the
association <code>has_many</code>, place the cursor on it (or just on the same line)
and hit <code>Ctrl + ]</code>. Pretty cool huh? In case you forgot, go back to where
you were with <code>Ctrl + t</code>.</p>
<h2 id="ack">ack</h2>
<p><a href="http://beyondgrep.com/" title="ack homepage">ack</a> is like grep but on steroids.</p>
<blockquote>
<p>Designed for programmers with large heterogeneous trees of source code,
ack is written purely in portable Perl 5 and takes advantage of the
power of Perl's regular expressions.</p>
</blockquote>
<p>It supports multiple types which you can see by typong <code>ack --help-types</code>.</p>
<p>Of course there is a <a href="https://github.com/mileszs/ack.vim" title="ack vim plugin">vim plugin</a>!</p>
<h3 id="alternative-ag">alternative (ag)</h3>
<p>While reading the <a href="http://beyondgrep.com/more-tools/" title="ack: more tools">more-tools</a> page of ack I found out about <a href="https://github.com/ggreer/the_silver_searcher" title="ag at github">ag</a>,
also called the_silver_searcher. It is said to search code about 3–5×
faster than ack, is written in C and have some more enhancements than ack.
You may want to give this a try to. And as you have guessed there is also
an <a href="https://github.com/rking/ag.vim" title="ag vim plugin">ag vim plugin</a>.</p>
<h1 id="conclusion">Conclusion</h1>
<p>The editor of choice and the tools you use in web development play a great role
in one's productivity, so you have to choose wisely and spend some time to get
to know it. Personally, I learned a lot more these past days I was crafting
this post and I hope you got something out of it too :)</p>
    </div>

    <div class="neighbors"></div>

      <nav class="older">
          <a href="http://axilleas.me/en/blog/2014/rubocop-to-the-rescue">
              <span class="lpin"></span>
              Rubocop to the rescue!
          </a>
      </nav>

      <nav class="newer">
          <a href="http://axilleas.me/en/blog/2014/isitfedoraruby-gsoc-midterm-sum-up">
              isitfedoraruby gsoc midterm sum up
              <span class="rpin"></span>
          </a>
      </nav>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'kissmyarch';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></article>
   </div>

   <footer>
       <p>Powered by <a href="http://docs.getpelican.com">
           Pelican</a> using <a href="https://github.com/axilleas/pelican-uberspot">uberspot theme</a> &bull;
         Background image from <a href="http://subtlepatterns.com/">Subtle patterns</a> &bull;
               <a href="https://github.com/axilleas/axilleas.github.io/tree/source" title="Source code">Source code</a>
</p>


 <p><a id="cc-logo" title="Creative Commons License"
 rel="license" href="http://creativecommons.org/licenses/by/4.0/"></a>
 Except where otherwise noted, content on this site is licensed under a<br />
 <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>

   </footer>
     <!-- Piwik -->
    <script type="text/javascript">
      var _paq = _paq || [];
      _paq.push(["trackPageView"]);
      _paq.push(["enableLinkTracking"]);

      (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik2-glb.rhcloud.com/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "1"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Piwik Code -->
</body>
</html>