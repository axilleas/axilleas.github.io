<!DOCTYPE html>
<html>
   <head>
   <meta charset="utf-8">
       <title>How to install Diaspora on CentOS 7</title>
       <meta charset="utf-8" />
       <meta name="viewport" content="width=device-width, initial-scale=1.0" />
       <meta http-equiv="Pragma" content="no-cache" />
       <meta http-equiv="Expires" content="-1" />
       <link rel="stylesheet" href="/theme/css/main.css" type="text/css" />
       <link rel="stylesheet" href="/theme/css/friendly.css" type="text/css" />
       <link rel="stylesheet" href="/theme/css/print.css" type="text/css" media="print" />
       <link rel="stylesheet" type="text/css" href="/theme/tipuesearch/tipuesearch.css" media="screen">
       <link rel="stylesheet" href="/theme/css/font-awesome.min.css" type="text/css" />
       <link href="http://axilleas.me/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Over the line RSS Feed" />
</head>
<body>
   <header>
       <h1><a href="/" title="Mark it zero">Over the line</a></h1>
       <nav>
         <a href="/about" title="about me">whoami</a> &bull;
         <a href="/archives.html" title="Archives">Archives</a> &bull;
         <a id="subscribe-link" href="/rss" title="RSS feed" rel="nofollow">subscribe</a>
         <form id="searchform" action="/search.html" onsubmit="return (this.elements['q'].value.length > 0)">
               <input id="searchbox" type="text" name="q" size="12" placeholder="Search">
         </form>
       </nav>
   </header>

   <div id="main">
<article>
    <header>
<h1><a href="/en/blog/2015/how-to-install-diaspora-on-centos-seven" rel="bookmark">
    How to install Diaspora on CentOS 7
</a></h1>
<span title="~445 words" id='stats'>~2 min read</span>
&bull;
<time datetime="2015-03-04 00:00:00+02:00" pubdate>Posted on
    Wed 04 March 2015
</time>
<span class="category">in <a href="/category/opensource.html">
    opensource</a>
</span>
    <ul class="tags">
    Tags:
        <li><a href="/tag/diaspora.html">diaspora</a></li>
        <li><a href="/tag/centos.html">centos</a></li>
        <li><a href="/tag/nginx.html">nginx</a></li>
        <li><a href="/tag/rails.html">rails</a></li>
        <li><a href="/tag/ruby.html">ruby</a></li>
        <li><a href="/tag/fedoraplanet.html">fedoraplanet</a></li>
    </ul>
    </header>

    <div class="body">
        <p>The tutorial isn't really hosted on my blog but on DigitalOcean's community
page, but I thought I could give some background regarding this decision.</p>
<h2 id="introduction">Introduction</h2>
<p>Last November, me, <a href="http://www.roussos.cc/" title="Nikos Roussos blog">Nikos</a> and <a href="http://pierros.papadeas.gr/" title="Pierros Papadeas blog">Pierros</a> decided to run a <a href="https://diasporafoundation.org/" title="Diaspora foundation">Diaspora</a> pod to
accomodate the needs of the Greek community and also increase the number of
active pods around the world. Right now we have 662 registered users and the
number keeps growing :)</p>
<p>I had some experience in deploying Rails apps duting my involvement with GitLab
and so I decided to share my findings in order that others could benefit as well.
This was also the first time I looked into Ansible so that we could easily
deploy our changes.</p>
<p>Our customizations are <a href="https://github.com/librenet/librenet.gr" title="librenet.gr on GitHub">free for everyone to see</a> and so is our
<a href="https://github.com/librenet/ansible" title="librenet.gr ansible repo">ansible code</a>.</p>
<h2 id="tutorial">Tutorial</h2>
<p>Instead of publishing this on my blog, I decided to go bigger and contacted
Digital Ocean to see if they were interested in hosting an article on Diaspora
installation. After several weeks of email exchanging, testing and rearranging
bits of the tutorial, <a href="https://www.digitalocean.com/community/tutorials/how-to-run-an-open-source-distributed-social-network-with-diaspora-on-centos-7" title="How To Run an Open-Source Distributed Social Network with Diaspora on CentOS 7">it is finally live</a>!</p>
<p>Bare in mind that it is highly opinionated, based on the facts I gathered
during <a href="https://librenet.gr">librenet.gr</a> deployment.</p>
<p>The reasoning behind this, is that DigitalOcean is viewed by way more people than
this little blog spot :p</p>
<p>Also it is no secret that DigitalOcean pays to write, so that way I can put
some money on server costs :)</p>
<h3 id="bits-to-be-careful-about">Bits to be careful about</h3>
<p>After I posted the link to <code>#diaspora</code> on freenode, jhass, one of the lead
developers of Diaspora raised some concerns, so this post is also partially
trying to explain the desicions behind the steps I included in the tutorial.</p>
<p>First of all, do <strong>NOT</strong> run Diaspora on production with a self-signed certificate.
This will cause future problems, like your pod not being able to talk effectively
to other pods. I already sent my concerns to DO, so I expect it to change any
time soon.</p>
<p>Secondly, the guide relies on current stable version of Diaspora (<code>v0.4.1.2</code>)
and the article will be deprecated in many areas starting with version 0.5.
Among others, future versions of Diaspora:</p>
<ul>
<li>will create the database automatically with <code>rake db:create</code> asking for root
  password if it doesn't have permissions to create the DB</li>
<li>will change the database collation from <code>utf8 -&gt; utf8mb4</code></li>
<li><code>ruby 2.0.0p353</code> which is in current CentOS repos, will be likely dropped
  in Diaspora 0.6 since it will be EOL'd in 2016</li>
</ul>
<p>Also, the next version of Diaspora will have chat support which adds a whole
other level of complexity to set up.</p>
<p>Having said that, I will do my best to keep the current tutorial on par with
future Diaspora releases.</p>
    </div>

    <div class="neighbors"></div>

      <nav class="older">
          <a href="http://axilleas.me/en/blog/2015/gitlab-cookbook-review">
              <span class="lpin"></span>
              GitLab Cookbook review
          </a>
      </nav>


<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'kissmyarch';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></article>
   </div>

   <footer>
       <p>Powered by <a href="http://docs.getpelican.com">
           Pelican</a> using <a href="https://github.com/axilleas/pelican-uberspot">uberspot theme</a> &bull;
         Background image from <a href="http://subtlepatterns.com/">Subtle patterns</a> &bull;
               <a href="https://github.com/axilleas/axilleas.github.io/tree/source" title="Source code">Source code</a>
</p>


 <p><a id="cc-logo" title="Creative Commons License"
 rel="license" href="http://creativecommons.org/licenses/by/4.0/"></a>
 Except where otherwise noted, content on this site is licensed under a<br />
 <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.</p>

   </footer>
  <!-- Piwik -->
  <script type="text/javascript">
    var _paq = _paq || [];
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//piwik2-glb.rhcloud.com/";
      _paq.push(['setTrackerUrl', u+'piwik.php']);
      _paq.push(["setSiteId", "5"]);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <noscript><p><img src="//piwik2-glb.rhcloud.com/piwik.php?idsite=5" style="border:0;" alt="" /></p></noscript>
  <!-- End Piwik Code -->
</body>
</html>