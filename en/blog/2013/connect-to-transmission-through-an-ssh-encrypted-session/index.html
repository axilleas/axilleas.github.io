<!DOCTYPE html>
<html lang="en">
<head>


    <meta name="tags" contents="transmission" />
    <meta name="tags" contents="ssh" />
    <meta name="tags" contents="torrent" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://axilleas.me">Over the line <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
            <li><a href="http://axilleas.me/about">whoami</a></li>
            <li><a href="http://axilleas.me/rss">Rss Feed</a></li>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="http://axilleas.me/en/blog/2013/connect-to-transmission-through-an-ssh-encrypted-session" rel="bookmark"
         title="Permalink to Connect to Transmission through an ssh encrypted session">Connect to Transmission through an ssh encrypted session</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2013-06-11T00:00:00">
      Tue 11 June 2013
    </abbr>
    <address class="vcard author">
      By <a class="url fn" href="http://axilleas.me/author/axil.html">axil</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>Use case: You have a remote machine with high bandwidth and you want to turn it 
in a torrent server.</p>
<div class="toc">
<ul>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#transgui">Transgui</a></li>
</ul>
</div>
<h2 id="prerequisites">Prerequisites</h2>
<p>All you have to install in the remote server, is <code>transmission-daemon</code> which is 
pretty much included in every well known distribution. After it successfuly installs,
run <code>transmission-daemon</code> as your user, no need for extra privileges. See the
man page for extra commands.</p>
<p>In the client side you will need <a href="https://code.google.com/p/transmisson-remote-gui/">Transmission Remote Gui</a> (I will call it 
transgui from now on), a cool cross platform front-end to remotely control a 
Transmission Bit-Torrent client daemon via its RPC protocol. In Fedora you can 
install it from the official repos with:</p>
<div class="codehilite"><pre><span class="n">yum</span> <span class="n">install</span> <span class="n">transgui</span>
</pre></div>


<p>whereas in Archlinux you can find it in <a href="https://aur.archlinux.org/packages/?O=0&amp;K=transmission-remote-gui">AUR</a>. I suggest you go with the bin one
which is a precompiled binary so that you avoid the building time.</p>
<p>Now, there is this little bash script which makes an ssh connection to you server,
in order to link transgui with transmission-daemon:</p>
<div class="codehilite"><pre><span class="c">#!/bin/bash</span>

<span class="nv">RPORT</span><span class="o">=</span>9091
<span class="nv">LPORT</span><span class="o">=</span>9092

ssh -C -c blowfish -f remotevm -L <span class="nv">$LPORT</span>:localhost:<span class="nv">$RPORT</span> -N

<span class="k">if</span> <span class="o">[</span> <span class="s1">&#39;x&#39;</span><span class="nv">$1</span> <span class="o">==</span> <span class="s1">&#39;x&#39;</span> <span class="o">]</span>;
  <span class="k">then</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Connection established&quot;</span>
  <span class="k">else</span>
<span class="k">    </span><span class="nb">echo</span> <span class="s2">&quot;Connection failed&quot;</span>
<span class="k">fi</span>
</pre></div>


<p>Let's cut it down to pieces. </p>
<ul>
<li><code>-C</code> is optional and it will compress all the data of the session. As the man page
dictates, use it only on slow connections (client side).</li>
<li><code>-c blowfish</code> selects the cipher specification for encrypting the session, in 
  this case <a href="https://en.wikipedia.org/wiki/Blowfish_%28cipher%29">blowfish</a>.</li>
<li><code>-f</code> requests ssh to go to the background.</li>
<li><code>remotevm</code> is just an alias of the remote server I have at my <code>~/.ssh/config</code> 
  in which I use an ssh key to connect to, without using a password.</li>
<li><code>-L $LPORT:localhost:$RPORT</code> specifies that the given port on the local (client) 
  host  is  to be  forwarded  to  the  given  host on the remote side.
  Here I use <code>RPORT</code> for the remote side and <code>LPORT</code> for the local one. Note that
  9091 is used by default from transmission as its bind port. All this is traversed 
  through localhost, no external IPs.</li>
<li><code>-N</code> makes sure there isn't executed a remote command. This is useful for just 
  forwarding ports.</li>
</ul>
<h2 id="transgui">Transgui</h2>
<p>After you run the above script and see the <em>Connection established</em> message, it's
time to open transgui and connect to the remote server. Make a new connection as
it appears in the image below. </p>
<p><img alt="Connect to transgui" src="http://axilleas.me/images/transgui_connection.png" /></p>
<p>Default username:password is <code>transmission</code>. If you want to change it, either 
pass it as a parameter when running <code>transmission-daemon</code> (see man page) or edit 
<code>$HOME/.config/transmission-daemon/settings.json</code> with the daemon stopped.</p>
<p>Some more screens:</p>
<p><img alt="Download dialog" src="http://axilleas.me/images/down_dialog.png" />
<em>The dialog that appears when you open a torrent file</em></p>
<p><img alt="Downloading Fedora" src="http://axilleas.me/images/fedora_torrent.png" />
<em>Main download page</em></p>
<p>Now all that remains is to retrieve the downloaded data. There are numerous ways 
to do so, like using <code>scp</code>, <code>rync</code>, <code>ftp</code>, <code>sftp</code>, <code>sshfs</code> etc, each serving its 
own purpose.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>